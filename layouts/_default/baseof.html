<!doctype html>
<html lang="{{ .Site.Language.Lang }}" {{/* data-theme set on <html> via params */}}
  {{- $conf := .Site.Params.themes -}}
  {{- $def  := cond (and $conf (isset $conf "default")) $conf.default "auto" -}}
  {{- if ne $def "auto" -}}
    {{- if (index site.Data.themes $def) -}}
      data-theme="{{ $def }}"
    {{- end -}}
  {{- end -}}
>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="format-detection" content="telephone=no">
  <meta name="description" content="{{ .Site.Params.siteDescription }}">
  {{ partial "head/seo.html" . }}
  <link rel="icon" href="{{ "favicon.svg" | relURL }}" type="image/svg+xml">

  {{ $site := resources.Get "css/site.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $site.RelPermalink }}" integrity="{{ $site.Data.Integrity }}" />

  {{ $themes := resources.Get "css/themes.css" | resources.ExecuteAsTemplate "css/themes.gen.css" . | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $themes.RelPermalink }}" integrity="{{ $themes.Data.Integrity }}" />

  {{ $print := resources.Get "css/print.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $print.RelPermalink }}" integrity="{{ $print.Data.Integrity }}" media="print" />

  {{ partial "head/ld-json.html" . }}

  {{- range .Sites -}}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Home.RelPermalink }}" />
  {{- end -}}
</head>
<body>
  <main class="container" role="main">
    <header>
      {{ $cv := index .Site.Data.cv .Site.Language.Lang }}
      {{ $name := or $cv.profile.name .Site.Title }}
      <div>
        <h1>{{ $name }}{{ with .Site.Params.author.image }}<img src="{{ . }}" alt="{{ $name }}" class="author-img" />{{ end }}</h1>
        <div class="meta">
          {{ with $cv.profile.role }}{{ . }}{{ end }}{{ if and $cv.profile.role $cv.profile.location }} · {{ end }}
          {{ with $cv.profile.location }}{{ . }}{{ end }}
        </div>
      </div>
      {{ if gt (len .Sites) 1 }}
      {{ $others := where .Sites "Language.Lang" "ne" .Site.Language.Lang }}
      <nav class="lang-switcher">
        {{ range $i, $s := $others }}
          <a href="{{ $s.Home.RelPermalink }}">{{ $s.Language.LanguageName }}</a>{{ if lt (add $i 1) (len $others) }} · {{ end }}
        {{ end }}
      </nav>
      {{ end }}
    </header>

    {{ partial "theme-guard.html" . }}

    {{ block "main" . }}{{ end }}

    {{ partial "footer.html" . }}
  </main>
</body>
</html>
