<!doctype html>
<html lang="{{ .Site.Language.Lang }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="{{ .Site.Params.siteDescription }}">
  {{ partial "head/seo.html" . }}
  <link rel="icon" href="{{ "favicon.svg" | relURL }}" type="image/svg+xml">

  {{ $site := resources.Get "css/site.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $site.RelPermalink }}" integrity="{{ $site.Data.Integrity }}" />

  {{ $print := resources.Get "css/print.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $print.RelPermalink }}" integrity="{{ $print.Data.Integrity }}" media="print" />

  {{ partial "head/ld-json.html" . }}

  {{- range .Sites -}}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Home.RelPermalink }}" />
  {{- end -}}
</head>
<body>
  <main class="container" role="main">
    <header>
      <div>
        {{ $cv := index .Site.Data.cv .Site.Language.Lang }}
        <h1>{{ with $cv.profile.name }}{{ . }}{{ else }}{{ .Site.Title }}{{ end }}</h1>
        <div class="meta">
          {{ with $cv.profile.role }}{{ . }}{{ end }}{{ if and $cv.profile.role $cv.profile.location }} · {{ end }}
          {{ with $cv.profile.location }}{{ . }}{{ end }}
        </div>
      </div>
      {{ $current := .Site.Language.Lang }}
      {{ $alternates := where .Sites "Language.Lang" "ne" $current }}
      {{ if gt (len $alternates) 0 }}
      <nav class="lang-switcher">
        {{ range $i, $lang := $alternates }}
          <a href="{{ $lang.Home.RelPermalink }}">{{ $lang.Language.LanguageName }}</a>{{ if lt (add $i 1) (len $alternates) }} · {{ end }}
        {{ end }}
      </nav>
      {{ end }}
      {{/* theme toggle removed: color scheme configured in config */}}
    </header>

    {{ block "main" . }}{{ end }}

    {{ partial "footer.html" . }}
  </main>

  <script>
    (function(){
      const root = document.documentElement;
      const mode = "{{ .Site.Params.colorScheme | default "auto" }}";
      if(mode === "light"){ root.style.colorScheme = "light"; }
      else if(mode === "dark"){ root.style.colorScheme = "dark"; }
      else { root.style.colorScheme = ""; } // auto
    })();
  </script>
</body>
</html>
